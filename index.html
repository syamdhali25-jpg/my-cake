<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>üéâ Happy 19th Birthday Tanisha Mirza üéÇ</title>

<style>
body {
  background-color: #333;
  color: white;
  text-align: center;
  font-family: Arial, sans-serif;
  margin-top: 40px;
}

/* ---------------- CAKE WRAPPER ---------------- */
.cake-wrapper {
    transform: scale(1.1);
    margin-top: 20px;
    position: relative;
}

/* ---------------- CAKE CONTAINER ---------------- */
.cake {
    width: 300px;
    height: 260px;
    position: relative;
    margin: auto;
}

/* ---------------- PLATE ---------------- */
.plate {
    width: 360px;
    height: 80px;
    background: #d8d8d8;
    border-radius: 50%;
    position: absolute;
    bottom: -55px;
    left: 50%;
    transform: translateX(-50%);
    box-shadow: 0 25px 40px rgba(0,0,0,0.45);
}

/* ---------------- CAKE BODY ---------------- */
.cake-body {
    width: 100%;
    height: 180px;
    background: #3a2417;
    border-radius: 50% / 30%;
    position: absolute;
    bottom: 0;
    overflow: hidden;
    box-shadow: inset 0 -10px 25px rgba(0,0,0,0.5);
}

/* Chocolate rings */
.cake-body::before {
    content: "";
    position: absolute;
    top: 15px;
    left: 0;
    width: 100%;
    height: 170px;
    background: repeating-linear-gradient(
        to bottom,
        #4e3323,
        #4e3323 16px,
        #3b2518 16px,
        #3b2518 32px
    );
    border-radius: 50% / 30%;
}

/* ---------------- FROSTING ---------------- */
.frosting-top {
    position: absolute;
    top: -35px;
    width: 100%;
    height: 95px;
    background: #fff5e9;
    border-radius: 50% / 45%;
    box-shadow: inset 0 5px 10px rgba(0,0,0,0.15);
}

/* ---------------- DRIPS ---------------- */
.drip {
    position: absolute;
    background: #fff5e9;
    width: 70px;
    height: 80px;
    border-radius: 50px;
    top: 50px;
}

.drip:nth-of-type(1) { left: 25px; }
.drip:nth-of-type(2) { left: 115px; }
.drip:nth-of-type(3) { left: 205px; }

/* ---------------- CANDLES ---------------- */
.candles {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 240px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    z-index: 999;
}

/* Candle body */
.candle {
    width: 10px;
    height: 55px;
    background: #b30000;
    border-radius: 4px;
    position: relative;
}

/* Candle flame */
.flame {
    width: 12px;
    height: 18px;
    background: radial-gradient(circle, #ffe066, #ff8c00);
    border-radius: 50%;
    position: absolute;
    top: -23px;
    left: 50%;
    transform: translateX(-50%);
    animation: flicker .15s infinite alternate;
    box-shadow: 0 0 20px rgba(255,165,0,.7);
}

@keyframes flicker {
  from { transform: translateX(-50%) scale(1); opacity: 1; }
  to   { transform: translateX(-50%) scale(1.22); opacity: .85; }
}
</style>
</head>

<body>

<h1>üéâ Happy 19th Birthday Tanisha Mirza üéÇ</h1>
<div id="micMsg">üéôÔ∏è Blow on your microphone to blow out the candles!</div>

<!-- ---------------- CAKE STRUCTURE ---------------- -->
<div class="cake-wrapper">
    <div class="cake">

        <div class="plate"></div>

        <div class="cake-body">
            <div class="frosting-top"></div>
            <div class="drip"></div>
            <div class="drip"></div>
            <div class="drip"></div>
        </div>

        <div class="candles" id="candleContainer"></div>

    </div>
</div>

<script>
/* ---------------- CREATE 19 CANDLES ---------------- */
const container = document.getElementById("candleContainer");
for (let i = 0; i < 19; i++) {
    const candle = document.createElement("div");
    candle.className = "candle";

    const flame = document.createElement("div");
    flame.className = "flame";

    candle.appendChild(flame);
    container.appendChild(candle);
}

/* ---------------- MICROPHONE BLOW DETECTION ---------------- */
async function listenForBlow() {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        const audioContext = new AudioContext();
        const mic = audioContext.createMediaStreamSource(stream);
        const analyser = audioContext.createAnalyser();

        analyser.fftSize = 256;
        const dataArray = new Uint8Array(analyser.frequencyBinCount);

        mic.connect(analyser);

        function detectBlow() {
            analyser.getByteFrequencyData(dataArray);
            let volume = dataArray.reduce((a,b) => a + b) / dataArray.length;

            if (volume > 92) {
                blowCandles();
            }
            requestAnimationFrame(detectBlow);
        }

        detectBlow();
    }
    catch {
        document.getElementById("micMsg").innerText =
            "‚ö†Ô∏è Please allow microphone access to blow out candles.";
    }
}

function blowCandles() {
    document.querySelectorAll(".flame").forEach(f => f.style.display = "none");
    document.getElementById("micMsg").innerText = "‚ú® Candles blown out!";
}

listenForBlow();
</script>

</body>
</html>
